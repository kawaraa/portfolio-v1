module.exports = () => `
<div class="outer-container">
  <section class="container">
    <h4 id="projects-h4">Projects</h4>
    <div id="projects-categories">
      <div id="active-category"></div>
      <button class="btns" name="all">All</button>
      <button class="btns" name="nodejs">Node.js</button>
      <button class="btns" name="javascript">JavaScript</button>
      <button class="btns" name="react">React</button>
      <button class="btns" name="css">CSS</button>
      <button class="btns" name="typescript">TypeScript</button>
    </div>
    <div id="projects-results"></div>
  </section>
</div>

<script>
  function renderProjects(techName) {
    const container = document.getElementById("projects-results");
    container.innerHTML = " ";

    Util.fetchJSON("/api/project/" + techName)
      .then((projects) => {
        if (!projects[0]) return;
        projects.forEach((project) => {
          let div = Util.createAppend("div", container, { class: "frames" });
          console.log(project.link);
          Util.createAppend("iframe", div, {
            src: project.link,
            class: "frames-imgs",
          });
          Util.createAppend("a", div, {
            href: project.link,
            target: "_blank",
            txt: "View",
            class: "view-btns",
          });
        });
      })
      .catch(console.error);
  }

  function filterProjects(e) {
    let width = document.getElementById("projects-categories").offsetWidth;
    let active = document.getElementById("active-category");
    renderProjects(e.target.name);

    switch (e.target.name) {
      case "all":
        active.style.left = "0px";
        break;
      case "nodejs":
        active.style.left = width / 6 + "px";
        break;
      case "javascript":
        active.style.left = width / 3 + "px";
        break;
      case "react":
        active.style.left = width / 2 + "px";
        break;
      case "css":
        active.style.left = (width / 6) * 4 + "px";
        break;
      case "typescript":
        active.style.left = (width / 6) * 5 + "px";
        break;
    }
  }
  document.querySelectorAll("#projects-categories .btns").forEach((el) => {
    el.addEventListener("click", filterProjects);
  });
</script>
`